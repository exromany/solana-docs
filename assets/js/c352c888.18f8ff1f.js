"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4980],{3905:function(n,t,e){e.d(t,{Zo:function(){return l},kt:function(){return m}});var a=e(7294);function o(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function i(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,a)}return e}function r(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?i(Object(e),!0).forEach((function(t){o(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function s(n,t){if(null==n)return{};var e,a,o=function(n,t){if(null==n)return{};var e,a,o={},i=Object.keys(n);for(a=0;a<i.length;a++)e=i[a],t.indexOf(e)>=0||(o[e]=n[e]);return o}(n,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(a=0;a<i.length;a++)e=i[a],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(o[e]=n[e])}return o}var c=a.createContext({}),d=function(n){var t=a.useContext(c),e=t;return n&&(e="function"==typeof n?n(t):r(r({},t),n)),e},l=function(n){var t=d(n.components);return a.createElement(c.Provider,{value:t},n.children)},u={inlineCode:"code",wrapper:function(n){var t=n.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(n,t){var e=n.components,o=n.mdxType,i=n.originalType,c=n.parentName,l=s(n,["components","mdxType","originalType","parentName"]),p=d(e),m=o,g=p["".concat(c,".").concat(m)]||p[m]||u[m]||i;return e?a.createElement(g,r(r({ref:t},l),{},{components:e})):a.createElement(g,r({ref:t},l))}));function m(n,t){var e=arguments,o=t&&t.mdxType;if("string"==typeof n||o){var i=e.length,r=new Array(i);r[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=n,s.mdxType="string"==typeof n?n:o,r[1]=s;for(var d=2;d<i;d++)r[d]=e[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,e)}p.displayName="MDXCreateElement"},6744:function(n,t,e){e.r(t),e.d(t,{assets:function(){return l},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return u}});var a=e(3117),o=e(102),i=(e(7294),e(3905)),r=["components"],s={},c="Multisig guide",d={unversionedId:"operation/multisig-guide",id:"operation/multisig-guide",title:"Multisig guide",description:"This page is aimed at members of the [administration",source:"@site/docs/operation/multisig-guide.md",sourceDirName:"operation",slug:"/operation/multisig-guide",permalink:"/operation/multisig-guide",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"solidoSidebar",previous:{title:"Maintenance",permalink:"/operation/maintenance"},next:{title:"development",permalink:"/development/"}},l={},u=[{value:"Adding a validator",id:"adding-a-validator",level:2},{value:"Approving and executing validator onboarding",id:"approving-and-executing-validator-onboarding",level:2}],p={toc:u};function m(n){var t=n.components,e=(0,o.Z)(n,r);return(0,i.kt)("wrapper",(0,a.Z)({},p,e,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"multisig-guide"},"Multisig guide"),(0,i.kt)("p",null,"This page is aimed at members of the ",(0,i.kt)("a",{parentName:"p",href:"/administration"},"administration\nmultisig"),"."),(0,i.kt)("h2",{id:"adding-a-validator"},"Adding a validator"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"This step needs to be executed by one of the multisig owners.")),(0,i.kt)("p",null,"The validator should have provided a vote account, stSOL SPL token account, and\noptionally a maintainer account. In this example, we have"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Vote account: ",(0,i.kt)("inlineCode",{parentName:"li"},"EAsHKTdxL9GELqQatEFFe3mbSBcbxyEiA8yoPihGhoM6")),(0,i.kt)("li",{parentName:"ul"},"stSOL account: ",(0,i.kt)("inlineCode",{parentName:"li"},"3gD74tkT4NAnzUT5SsiYTV5HPgML4wnjjxrxfpjaFXHk")),(0,i.kt)("li",{parentName:"ul"},"Maintainer account: ",(0,i.kt)("inlineCode",{parentName:"li"},"F5HwubK4v7VKazPXzRhdvHqA3MmJR5yXDoC8mXeMpdDw"))),(0,i.kt)("p",null,"To be sure, we can confirm that the vote account is set up correctly with\n",(0,i.kt)("inlineCode",{parentName:"p"},"solana vote-account")," as shown in ",(0,i.kt)("a",{parentName:"p",href:"/validator-onboarding#setting-up-a-vote-account"},"the validator onboarding\ndocs"),", but a transaction that\nadds a vote account will fail anyway if the vote account is not set up\ncorrectly."),(0,i.kt)("p",null,"Ensure ",(0,i.kt)("a",{parentName:"p",href:"/operation/the-solido-utility#configuration"},(0,i.kt)("inlineCode",{parentName:"a"},"solido")," is configured"),", then create\nthe multisig transaction:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"$ solido --config testnet.json add-validator \\\n  --validator-vote-account EAsHKTdxL9GELqQatEFFe3mbSBcbxyEiA8yoPihGhoM6 \\\n  --validator-fee-account 3gD74tkT4NAnzUT5SsiYTV5HPgML4wnjjxrxfpjaFXHk\nTransaction address: BaVYNfiC8DkteXfJy58YcC5pz2qfYDBcNsAuEt7PBZ6h\n")),(0,i.kt)("p",null,"Check that the transaction was created as expected with ",(0,i.kt)("inlineCode",{parentName:"p"},"multisig\nshow-transaction"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"$ solido --config testnet.json multisig show-transaction \\\n  --transaction-address BaVYNfiC8DkteXfJy58YcC5pz2qfYDBcNsAuEt7PBZ6h\n\nMultisig: 7Yh1UgKE1KQoLYohynqdo84aNBwQ3GwU4XrCNY153PQ5\nDid execute: false\n\nSigners:\n  [ ] ENH1xvwjinUWkwEgw1hKduyAg7CrJMiKvr9nAS7wLHrp\n  [ ] DBd1yUhptC7yRq79sM4cAH1Zhe5rdTpJizxXJQGxRTyn\n  [ ] J4RLjzbJUrm4vRk5ZpPpk6CHzrmAiZGDByuyJ8f9jXR7\n  [x] 6S21QCmpAadEhHj3pY2RMbPMGwgYNvS4Pd7zUXoRDMdK\n  [ ] CeuSTdUx4XnPET4K4o3Zxx3zjh1yrR4f8fyWycGjs7wj\n  [ ] 6DzkRQ3CJXMdnwm9aS2ww7KNeKxw3YLANzpUeTFoRCtC\n  [ ] F4VFp4tFTyrQWo9YVjCbPE5eQP27ice2zyGDp2tN2Rkm\n\nInstruction:\n  Program to call: 7k3rzqoNQxgTLTooAvXriGBKYsd16bV3JMvatvXcBfNo\n  Accounts:\n\n    (some output omitted)\n\n  This is a Solido instruction. It adds a validator to Solido\n    Solido instance:        7yoacaUf7yu5wqxpcHaXtwCaMciR7kFqps8FwnX4cjeK\n    Manager:                F6xN9xSNduk84x6JxKwd3VuENL46TqmTyQiY36mCvwHr\n    Validator vote account: EAsHKTdxL9GELqQatEFFe3mbSBcbxyEiA8yoPihGhoM6\n    Validator fee account:  3gD74tkT4NAnzUT5SsiYTV5HPgML4wnjjxrxfpjaFXHk\n    Validator weight:       1000\n")),(0,i.kt)("p",null,"If the validator will run the maintenance daemon, we also need to propose a\nmultisig transaction to add the maintainer:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"$ solido --config testnet.json add-maintainer \\\n  --maintainer-address F5HwubK4v7VKazPXzRhdvHqA3MmJR5yXDoC8mXeMpdDw\nTransaction address: Cq8MtYCYwep7s475yEaLWQbJr8wgnuSnW2Y5doaw6wf4\n")),(0,i.kt)("p",null,"Verify the transaction:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"$ solido --config testnet.json multisig show-transaction \\\n  --transaction-address Cq8MtYCYwep7s475yEaLWQbJr8wgnuSnW2Y5doaw6wf4\n\nMultisig: 7Yh1UgKE1KQoLYohynqdo84aNBwQ3GwU4XrCNY153PQ5\nDid execute: false\n\nSigners:\n  [ ] ENH1xvwjinUWkwEgw1hKduyAg7CrJMiKvr9nAS7wLHrp\n  [ ] DBd1yUhptC7yRq79sM4cAH1Zhe5rdTpJizxXJQGxRTyn\n  [ ] J4RLjzbJUrm4vRk5ZpPpk6CHzrmAiZGDByuyJ8f9jXR7\n  [x] 6S21QCmpAadEhHj3pY2RMbPMGwgYNvS4Pd7zUXoRDMdK\n  [ ] CeuSTdUx4XnPET4K4o3Zxx3zjh1yrR4f8fyWycGjs7wj\n  [ ] 6DzkRQ3CJXMdnwm9aS2ww7KNeKxw3YLANzpUeTFoRCtC\n  [ ] F4VFp4tFTyrQWo9YVjCbPE5eQP27ice2zyGDp2tN2Rkm\n\nInstruction:\n  Program to call: 7k3rzqoNQxgTLTooAvXriGBKYsd16bV3JMvatvXcBfNo\n  Accounts:\n\n    * 7yoacaUf7yu5wqxpcHaXtwCaMciR7kFqps8FwnX4cjeK\n      signer: false, writable: true\n\n    * F6xN9xSNduk84x6JxKwd3VuENL46TqmTyQiY36mCvwHr\n      signer: true, writable: false\n\n    * F5HwubK4v7VKazPXzRhdvHqA3MmJR5yXDoC8mXeMpdDw\n      signer: false, writable: false\n\n  This is a Solido instruction. It adds a maintainer\n    Solido instance: 7yoacaUf7yu5wqxpcHaXtwCaMciR7kFqps8FwnX4cjeK\n    Manager:         F6xN9xSNduk84x6JxKwd3VuENL46TqmTyQiY36mCvwHr\n    Maintainer:      F5HwubK4v7VKazPXzRhdvHqA3MmJR5yXDoC8mXeMpdDw\n")),(0,i.kt)("p",null,"Please share the transaction addresses with the remaining multisig members."),(0,i.kt)("h2",{id:"approving-and-executing-validator-onboarding"},"Approving and executing validator onboarding"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"This step needs to be executed by the remaining multisig owners.")),(0,i.kt)("p",null,"To approve the addition of a new validator, we need:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"To know that the validator was admitted by the LNOSG."),(0,i.kt)("li",{parentName:"ul"},"The vote account, stSOL account, and maintainer account, provided by the\nvalidator."),(0,i.kt)("li",{parentName:"ul"},"The multisig transaction that adds the vote account."),(0,i.kt)("li",{parentName:"ul"},"Optionally, the multisig transaction that adds the maintainer.")),(0,i.kt)("p",null,"Ensure ",(0,i.kt)("a",{parentName:"p",href:"/operation/the-solido-utility#configuration"},(0,i.kt)("inlineCode",{parentName:"a"},"solido")," is configured"),", and\nconfirm that the transactions are adding the right vote account and maintainer,\nusing ",(0,i.kt)("inlineCode",{parentName:"p"},"solido multisig show-transaction"),", as shown in the previous section. Then\napprove the transactions:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"$ solido --config testnet.json multisig approve \\\n  --transaction-address BaVYNfiC8DkteXfJy58YcC5pz2qfYDBcNsAuEt7PBZ6h\n\nTransaction approved.\nSolana transaction id of approval: 2NKbP8LHYEy1DvZyq7gH2pHEDJk9E2f6Btv6sEeihzVpEi3qmBqbvs5SUKn3MaJCy6kEYQtyvCxSbkJea2LWawbj\nMultisig transaction now has 2 out of 4 required approvals.\n\n$ solido --config testnet.json multisig approve \\\n  --transaction-address Cq8MtYCYwep7s475yEaLWQbJr8wgnuSnW2Y5doaw6wf4\n\nTransaction approved.\nSolana transaction id of approval: 2RvvNVmqQnd4Fhf6jmac8xDiDADCXU1jVgaBvbrytiFPs2pvNq6LXgrGeeQbXCQqCbACaD5zqK8uCbsECrFiUwKD\nMultisig transaction now has 2 out of 4 required approvals.\n")),(0,i.kt)("p",null,"If the transaction is approved by a majority, you can also go ahead and execute\nit:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"$ solido --config testnet.json multisig execute-transaction \\\n  --transaction-address BaVYNfiC8DkteXfJy58YcC5pz2qfYDBcNsAuEt7PBZ6h\n\nTransaction executed.\nSolana transaction id of execution: 3qawwqtnb684gV9AgqoTqdx8pgZfGQ2dvmMxtfsYWXJgszDMKLP5BBbB4nZfmFwGK5dmFSoFGfSU5M7XSdmXavej\n\n$ solido --config testnet.json multisig execute-transaction \\\n  --transaction-address Cq8MtYCYwep7s475yEaLWQbJr8wgnuSnW2Y5doaw6wf4\n\nTransaction executed.\nSolana transaction id of execution: 5N9vgWmBec6BFmgnJqFe7zvB5TrS22vDcmPxSw2PoZj7WWHa4LDw4j14qfxywDXYTsUAeUUQCqSbGSh5tp2WqEJn\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"The multisig\u2019s program derived address (PDA) needs to have sufficient\nfunds to execute transactions. Chorus One should have funded it during setup.")),(0,i.kt)("p",null,"You can confirm that the transaction was executed:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"$ solido --config testnet.json multisig show-transaction \\\n  --transaction-address Cq8MtYCYwep7s475yEaLWQbJr8wgnuSnW2Y5doaw6wf4\n\nMultisig: 7Yh1UgKE1KQoLYohynqdo84aNBwQ3GwU4XrCNY153PQ5\nDid execute: true\n\nSigners:\n  [x] ENH1xvwjinUWkwEgw1hKduyAg7CrJMiKvr9nAS7wLHrp\n  [x] DBd1yUhptC7yRq79sM4cAH1Zhe5rdTpJizxXJQGxRTyn\n  [x] J4RLjzbJUrm4vRk5ZpPpk6CHzrmAiZGDByuyJ8f9jXR7\n  [x] 6S21QCmpAadEhHj3pY2RMbPMGwgYNvS4Pd7zUXoRDMdK\n  [ ] CeuSTdUx4XnPET4K4o3Zxx3zjh1yrR4f8fyWycGjs7wj\n  [ ] 6DzkRQ3CJXMdnwm9aS2ww7KNeKxw3YLANzpUeTFoRCtC\n  [ ] F4VFp4tFTyrQWo9YVjCbPE5eQP27ice2zyGDp2tN2Rkm\n\n(remaining output omitted)\n")))}m.isMDXComponent=!0}}]);